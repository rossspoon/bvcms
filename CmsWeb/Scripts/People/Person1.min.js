function RebindMemberGrids(){$.updateTable($("#current-tab form")),$.updateTable($("#pending-tab form")),$("#memberDialog").dialog("close")}function RebindUserInfoGrid(){$.updateTable($("#user-tab form")),$("#memberDialog").dialog("close")}function AddSelected(n){window.location="/Merge?PeopleId1="+$("#PeopleId").val()+"&PeopleId2="+n.pid}function dialogError(n){return n}$(function(){$("#split").live("click",function(n){n.preventDefault();var t=$(this).attr("href");bootbox.confirm("Are you sure you want to split this person into their own family?",function(n){n===!0&&$.post(t,{},function(n){window.location=n})})}),$("#search-add a.commit").live("click",function(n){n.preventDefault();var t=$(this).closest("form"),i=t.serialize(),r=$(this).attr("href"),u=t.closest("div.modal");return $.block(),$.post(r,i,function(n){if(u.modal("hide"),n.message)alert(n.message);else switch(n.from){case"RelatedFamily":$("#related-families-div").load("/Person2/RelatedFamilies/"+n.pid,{},function(){$.SetRelationEditable(),$(n.key).editable("toggle")});break;case"Family":$("#family-div").load("/Person2/FamilyGrid/"+n.pid,{})}$.unblock()}),!1}),$("a.delete-relation").live("click",function(n){n.preventDefault();var t=$(this).attr("href");return bootbox.confirm("Are you sure you want to remove this relationship?",function(n){n===!0&&$("#related-families-div").load(t,{})}),!1}),$("a.editaddr").click(function(n){n.preventDefault(),$("<div class='modal fade hide' />").load($(this).attr("href"),{},function(){$(this).modal("show");$(this).on("hidden",function(){$(this).remove()});$(this).on("click","a.close-saved-address",function(){$("#primaryaddress").html($("#primaryaddressnew").html());var n=$("#addressnew").data("target");$("#"+n).html($("#addressnew").html())})})}),$("a.editfamily").live("click",function(n){n.stopPropagation(),n.preventDefault(),$(this).closest("div.open").removeClass("open"),$(this).closest("li.relation-item").find("span.relation-description").editable("toggle")}),$.SetRelationEditable=function(){$("span.relation-description").editable({type:"textarea",toggle:"manual",name:"description",url:function(n){var t=new $.Deferred;return $.post("/Person2/EditRelation/"+n.pk,{value:n.value},function(){t.resolve()}),t.promise()}})},$.SetRelationEditable(),$("#position").editable({source:[{value:10,text:"Primary Adult"},{value:20,text:"Secondary Adult"},{value:30,text:"Child"}],type:"select",url:"/Person2/PostData",name:"position",success:function(){$("#family-div").load("/Person2/FamilyGrid/"+$("#position").data("pk"),{})}}),$("#clipaddr").live("click",function(){var t=$("#addrhidden")[0],n;return t.createTextRange&&(n=t.createTextRange(),n&&n.execCommand("Copy")),!1}),$("#deleteperson").click(function(){var n=$(this).attr("href");return confirm("Are you sure you want to delete?")&&$.post(n,null,function(n){n!="ok"?($.block("delete Failed: "+n),$(".blockOverlay").attr("title","Click to unblock").click($.unblock)):($.block("person deleted"),$(".blockOverlay").attr("title","Click to unblock").click(function(){$.unblock(),window.location="/"}))}),!1}),$("a.deloptout").live("click",function(n){n.preventDefault();var t=$(this).attr("href");confirm("Are you sure you want to delete?")&&$.post(t,{},function(n){n!="ok"?$.growlUI("failed",n):($.updateTable($("#user-tab form")),$.growlUI("Success","OptOut deleted"))})}),$("#moveperson").click(function(n){n.preventDefault();var t=$("#dialogbox");return $("iframe",t).attr("src",this.href),t.dialog("option","title","Merge To Person"),t.dialog("open"),!1}),$.getTable=function(n){return $.ajax({type:"POST",url:n.attr("action"),data:n.serialize(),success:function(t){n.html(t)}}),!1},$(".CreateAndGo").click(function(){return confirm($(this).attr("confirm"))&&$.post($(this).attr("href"),null,function(n){window.location=n}),!1});$("form.ajax").on("click","a.membertype",function(n){n.preventDefault(),$("<div class='modal fade hide' />").load($(this).attr("href"),{},function(){$(this).modal("show");$(this).on("hidden",function(){$(this).remove()});$(this).on("click","a.close-saved-address",function(){$("#primaryaddress").html($("#primaryaddressnew").html());var n=$("#addressnew").data("target");$("#"+n).html($("#addressnew").html())})})});$("#currentLink").click(function(){$.showTable($("#current form"))}),$("#previousLink").click(function(){$.showTable($("#previous form"))}),$("#pendingLink").click(function(){$.showTable($("#pending form"))}),$("#attendanceLink").click(function(){$.showTable($("#attendance-tab form"))}),$("#contacts-link").click(function(){$("#contacts-tab form").each(function(){$.showTable($(this))})}),$("#member-link").click(function(){var n=$("#memberdisplay");$("table",n).size()==0&&($.post(n.attr("action"),null,function(t){$(n).html(t).ready(function(){$.UpdateForSection(n)})}),$.showTable($("#extras-tab form")),$.extraEditable("#extravalues"))}),$("#system-link").click(function(){$.showTable($("#user-tab form"))}),$("#changes-link").click(function(){$.showTable($("#changes-tab form"))}),$("#volunteer-link").click(function(){$.showTable($("#volunteer-tab form"))}),$("#duplicates-link").click(function(){$.showTable($("#duplicates-tab form"))}),$("#optouts-link").click(function(){$.showTable($("#optouts-tab form"))}),$("#family table.grid > tbody > tr:even").addClass("alt"),$("#recreg-link").click(function(n){var t,i;return(n.preventDefault(),t=$("#recreg-tab form"),$("table",t).size()>0)?!1:(i=t.serialize(),$.post(t.attr("action"),i,function(n){$(t).html(n),$(".bt",t).button()}),!1)}),$("a.displayedit").live("click",function(n){n.preventDefault();var t=$(this).closest("form");return $.post($(this).attr("href"),null,function(n){$(t).html(n).ready(function(){$.UpdateForSection(t)})}),!1}),$.options=function(n){return{minLength:3,source:function(t,i){return $.ajax({url:n,type:"post",data:{query:t},dataType:"json",success:function(n){return typeof n=="undefined"?!1:i(n)}})}}},$.UpdateForSection=function(n){return $("#Employer").typeahead($.options("/Person2/Employers")),$("#School",n).typeahead($.options("/Person2/Schools")),$("#Occupation",n).typeahead($.options("/Person2/Occupations")),$("#NewChurch",n).typeahead($.options("/Person2/Churches")),$("#PrevChurch",n).typeahead($.options("/Person2/Churches")),$("form select").chosen(),moment.lang("en"),$(".date").datepicker(),!1},$("form.DisplayEdit a.submitbutton").live("click",function(n){var t,i;return(n.preventDefault(),t=$(this).closest("form"),!$(t).valid())?!1:(i=t.serialize(),$.post($(this).attr("href"),i,function(n){$(t).html(n).ready(function(){var n=$("#businesscard");$.post($(n).attr("href"),null,function(t){$(n).html(t)}),$(".submitbutton,.bt").button()})}),!1)});$("form").on("click","#future",function(n){n.preventDefault();var t=$(this).closest("form"),i=t.serialize();$.post($(t).attr("action"),i,function(n){$(t).html(n)})});$("form.DisplayEdit").submit(function(){return $("#submitit").val()?!0:!1}),$.validator.addMethod("date2",function(n,t){var i=$.DateValid(n);return this.optional(t)||i},$.format("Please enter valid date")),$.validator.setDefaults({highlight:function(n){$(n).addClass("ui-state-highlight")},unhighlight:function(n){$(n).removeClass("ui-state-highlight")},rules:{NickName:{maxlength:15},Title:{maxlength:10},First:{maxlength:25},Middle:{maxlength:15},Last:{maxlength:100,required:!0},Suffix:{maxlength:10},AltName:{maxlength:100},Maiden:{maxlength:20},HomePhone:{maxlength:20},CellPhone:{maxlength:20},WorkPhone:{maxlength:20},EmailAddress:{maxlength:150},School:{maxlength:60},Employer:{maxlength:60},Occupation:{maxlength:60},WeddingDate:{date2:!0},DeceasedDate:{date2:!0},Grade:{number:!0},Address1:{maxlength:40},Address2:{maxlength:40},City:{maxlength:30},Zip:{maxlength:15},FromDt:{date2:!0},ToDt:{date2:!0},DecisionDate:{date2:!0},JoinDate:{date2:!0},BaptismDate:{date2:!0},BaptismSchedDate:{date2:!0},DropDate:{date2:!0},NewMemberClassDate:{date2:!0}}}),$("#addrf").validate(),$("#addrp").validate(),$("#basic").validate();$("body").on("change",".atck",function(){var n=$(this);$.post("/Meeting/MarkAttendance/",{MeetingId:$(this).attr("mid"),PeopleId:$(this).attr("pid"),Present:n.is(":checked")},function(t){if(t.error)n.attr("checked",!n.is(":checked")),alert(t.error);else{var i=n.closest("form"),r=i.serialize();$.post($(i).attr("action"),r,function(n){$(i).html(n)})}})});$("body").on("click","a.deleteextra",function(n){return n.preventDefault(),confirm("are you sure?")&&$.post("/Person/DeleteExtra/"+$("#PeopleId").val(),{field:$(this).attr("field")},function(n){n.startsWith("error")?alert(n):($.getTable($("#extras-tab form")),$.extraEditable("#extravalues"))}),!1});$("form").on("click","a.reverse",function(n){n.preventDefault();var t=$(this).closest("form");$.post("/Person/Reverse",{id:$("#PeopleId").val(),field:$(this).attr("field"),value:$(this).attr("value"),pf:$(this).attr("pf")},function(n){$(t).html(n)})});$("#vtab>ul>li").click(function(){$("#vtab>ul>li").removeClass("selected"),$(this).addClass("selected");var n=$("#vtab>ul>li").index($(this));$("#vtab>div").hide().eq(n).show()})});
//@ sourceMappingURL=Person1.min.js.map