function hideDropdowns(n){var t=n?$(n.target).parents().andSelf():null;t&&t.is(".dropdown-menu")&&!t.is("A")||($("div.dropdown-menu").hide(),$(".trigger-dropdown").removeClass("dropdown-open"),$("li.hideAlt").hide())}function dimOff(){$("#darkLayer").hide()}function dimOn(){$("#darkLayer").show()}function CloseAddDialog(){$("#AddDialog").dialog("close"),window.location="/Person/Current"}function CloseAddOrgDialog(n){$("#AddDialog").dialog("close"),window.location="/Organization/Index/"+n}$(function(){$.fn.dropdown=function(){return this.each(function(){$(this).click(function(n){n.preventDefault();var t=$(this),i=$($(this).next(".dropdown-menu")),r=t.hasClass("dropdown-open");return($("div.dropdown-menu").hide(),$(".trigger-dropdown").removeClass("dropdown-open"),r)?!1:(i.show(),i.css({left:i.hasClass("anchor-right")?t.position().left-(i.outerWidth()-t.outerWidth()):t.position().left}),t.addClass("dropdown-open"),!1)})})},$.fn.dropdownFocus=function(){return this.each(function(){$(this).focus(function(n){n.preventDefault();var t=$(this),i=$($(this).next(".dropdown-menu")),r=t.hasClass("dropdown-open");return($("div.dropdown-menu").hide(),$(".trigger-dropdown").removeClass("dropdown-open"),r)?!1:(i.show(),i.css({left:i.hasClass("anchor-right")?t.position().left-(i.outerWidth()-t.outerWidth()):t.position().left}),t.addClass("dropdown-open"),!1)}),$(this).click(function(){var n=$(this),t=n.hasClass("dropdown-open");return t?!1:!0})})},$(function(){$("HTML").on("click.dropdown",hideDropdowns);$(window).on("resize.dropdown",hideDropdowns);$(document).keydown(function(n){n.keyCode==17&&$("a.trigger-dropdown").hasClass("dropdown-open")&&$("li.hideAlt").toggle()}),$("li.hideAlt").hide()})}),$(document).ready(function(){$.gotoPage=function(n,t){var i=$(n).closest("form");return $("#Page",i).val(t),$.getTable(i)},$.setPageSize=function(n){var t=$(n).closest("form");return $("#Page",t).val(1),$("#PageSize",t).val($(n).val()),$.getTable(t)},$.getTable=function(n){var t;return n&&(t=n.serialize()),$.post(n.attr("action"),t,function(t){$(n).html(t).ready(function(){$("table.grid > tbody > tr:even",n).addClass("alt"),$("a.trigger-dropdown",n).dropdown(),$(".bt").button(),$(".datepicker").datepicker()})}),!1},$("table.grid > thead a.sortable").live("click",function(){var n=$(this).closest("form"),i=$(this).text(),r=$("#Sort",n),t=$("#Direction",n);return $(r).val()==i&&$(t).val()=="asc"?$(t).val("desc"):$(t).val("asc"),$(r).val(i),$.getTable(n),!1}),$.showTable=function(n){return $("table.grid",n).size()==0&&$.getTable(n),!1},$.updateTable=function(n){return $("table.grid",n).size()>0&&$.getTable(n),!1};$("body").on("click","input[name='toggletarget']",function(){$('a.target[target="people"]').length==0?($("a.target").attr("target","people"),$("input[name='toggletarget']").attr("checked",!0)):($("a.target").removeAttr("target"),$("input[name='toggletarget']").removeAttr("checked"))})}),$(document).ready(function(){$("#ChooseLabelType").dialog({overlay:{background:"#000",opacity:.3},bgiframe:!0,modal:!0,autoOpen:!1,closeOnEscape:!0,width:400}),$("#TagAllDialog").dialog({overlay:{background:"#000",opacity:.3},bgiframe:!0,modal:!0,autoOpen:!1,closeOnEscape:!0}),$(".ChooseLabelType").live("click",function(n){var t,i;return n.preventDefault(),$("div.dropdown-menu").hide(),t=$("#ChooseLabelType"),t.dialog("open"),i=n.target.href.search(/\?/)==-1?"?":"&",$("#cmdOK").unbind("click").click(function(t){t.preventDefault();var r=n.target.href+i+"titles="+$("#UseTitle")[0].checked+"&format="+$("input[name=addressedto]:checked").val()+"&usephone="+$("#UsePhone")[0].checked+"&sortzip="+$("#SortZip")[0].checked+"&skipNum="+$("#SkipNum").val();return $("#ChooseLabelType").dialog("close"),window.open(r),!1}),!1}),$("#TagAll").live("click",function(n){var t,i;return n.preventDefault(),t=this.href,$("div.dropdown-menu").hide(),i=$("#TagAllDialog").dialog("open"),$("#TagAllRun").click(function(n){n.preventDefault(),i.dialog("close");var r=$(this).closest("form").serialize();return $.block(),$.post(t,r,function(n){n==="Manage"?window.location="/Tags":($(".taguntag:visible").text(n),$.unblock())}),!1}),!1}),$("#UnTagAll").live("click",function(n){return n.preventDefault(),$("div.dropdown-menu").hide(),$.block(),$.post(this.href,null,function(n){$(".taguntag:visible").text(n),$.unblock()}),!1});$("body").on("click","#AddContact",function(n){return($("div.dropdown-menu").hide(),n.preventDefault(),!confirm("Are you sure you want to add a contact for all these people?"))?!1:($.block(),$.post(this.href,null,function(n){$.unblock(),n<0?$.growlUI("error","too many people to add to a contact (max 100)"):n==0?$.growlUI("error","no results"):window.location=n}),!1)});$("body").on("click","#AddTasks",function(n){return(n.preventDefault(),$("div.dropdown-menu").hide(),!confirm("Are you sure you want to add a task for each of these people?"))?!1:($.block(),$.post(this.href,null,function(n){$.unblock(),n<0?$.growlUI("error","too many people to add tasks for (max 100)"):n==0?$.growlUI("error","no results"):window.location="/Task"}),!1)});$.QueryString=function(n,t){var i={};return $.each(n.split("&"),function(){var n=this.split("=");i[n[0]]=n[1]}),i[t]},$.block=function(n){n||(n="<h1>working on it...<\/h1>"),$.blockUI({message:n,overlayCSS:{opacity:0},css:{border:"3px",padding:"15px",backgroundColor:"#aaa","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#000",width:"500px"}})},$.unblock=function(){$.unblockUI()},$.navigate=function(n,t){n+=(n.match(/\?/)?"&":"?")+t,window.location=n};var n={overlay:{background:"#000",opacity:.3},bgiframe:!0,modal:!0,autoOpen:!1,closeOnEscape:!0};$("#ExportStartEnd").dialog(n),$("#SetExtraValues").dialog(n);$("body").on("click",".ChooseStartEnd",function(n){n.preventDefault();var t=$("#ExportStartEnd");return t.dialog("open"),$("#ExportStartEndRun").unbind("click").click(function(i){i.preventDefault();var r=n.target.href;return r=r.appendQuery("start="+$("#startdt",t).val()),r=r.appendQuery("end="+$("#enddt",t).val()),$("#ExportStartEnd").dialog("close"),window.open(r),!1}),!1});$("body").on("click","a.ChooseExtraValues",function(n){n.preventDefault(),hideDropdowns();var t=$("#SetExtraValues");return t.dialog("option","title",$(this).text().trim()),t.dialog("open"),$("#SetExtraValuesRun").unbind("click").click(function(i){i.preventDefault();var r={field:$("#field",t).val(),value:$("#value",t).val()};return $.block(),$.post(n.target.href,r,function(n){$.unblock(),alert(n),$("#SetExtraValues").dialog("close")}),!1}),!1});$.DateValid=function(n,t){var r=/^(0?[1-9]|1[012])[\/-](0?[1-9]|[12][0-9]|3[01])[\/-]((19|20)?[0-9]{2})$/i,i;return $.dateFormat.startsWith("d")&&(r=/^(0?[1-9]|[12][0-9]|3[01])[\/-](0?[1-9]|1[012])[\/-]((19|20)?[0-9]{2})$/i),i=!0,r.test(n)||(t==!0&&$.growlUI("error","enter valid date"),i=!1),i},$.SortableDate=function(n){var t;return t=$.dateFormat.startsWith("d")?new Date(n.split("/")[2],n.split("/")[1]-1,n.split("/")[0]):new Date(n.split("/")[2],n.split("/")[0]-1,n.split("/")[1]),t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},jQuery.fn.center=function(n){return n=n?this.parent():window,this.css({position:"absolute",top:($(n).height()-this.outerHeight())/2+$(n).scrollTop()+"px",left:($(n).width()-this.outerWidth())/2+$(n).scrollLeft()+"px"}),this}}),String.prototype.startsWith=function(n){return n==this.substring(0,n.length)},String.prototype.appendQuery=function(n){return this&&this.length>0?this.contains("&")||this.contains("?")?this+"&"+n:this+"?"+n:n},String.prototype.contains=function(n){return this.indexOf(n)!=-1},String.prototype.endsWith=function(n){return n==this.substring(this.length-n.length)},String.prototype.addCommas=function(){for(var t=this.split("."),n=t[0],r=t.length>1?"."+t[1]:"",i=/(\d+)(\d{3})/;i.test(n);)n=n.replace(i,"$1,$2");return n+r},$(document).ready(function(){$("a.trigger-dropdown").dropdown(),$("#SearchText").each(function(){var n="";$(this).autocomplete({appendTo:"#SearchResults",position:{my:"right top",at:"right bottom",of:$("#SearchText")},minLength:3,autoFocus:!0,open:function(){$("#SearchResults > ul").css("z-index",1002)},close:function(){var t=$(this).val();if(n!==t&&t!=="")return $("#SearchText").autocomplete("search");$("#SearchText").val("")},source:function(t,i){t.term==="---"?i([{id:-1,line1:"People Search"},{id:-2,line1:"Advanced Search"},{id:-3,line1:"Organization Search"}]):(n=t.term,$.post("/Home/Names",t,function(n){i(n.slice(0,15))},"json"))},select:function(t,i){var r=$(this).val();return n!==r&&r!==""?!1:(window.location=i.item.id===-1?"/PeopleSearch?name="+n:i.item.id===-2?"/QueryBuilder/Main":i.item.id===-3?"/OrgSearch":(i.item.isOrg?"/Organization/Index/":"/Person/Index/")+i.item.id,!0)},focus:function(n){n.preventDefault()}}).data("uiAutocomplete")._renderItem=function(n,t){if(t.id===0)return $("<li>").append("<hr/>").appendTo(n);var i="<a><b>"+(t.isOrg?"Org: ":"")+t.line1+"<\/b>";return t.id>0&&(i+="<br>"+(t.isOrg?"Div: ":"")+t.line2),i+="<\/a>",$("<li>").append(i).appendTo(n)}}),$("a.tutorial").click(function(n){n.preventDefault(),startTutorial($(this).attr("href"))}),$("#AddDialog").dialog({bgiframe:!0,autoOpen:!1,width:750,height:700,modal:!0,overlay:{opacity:.5,background:"black"},close:function(){$("iframe",this).attr("src","")}}),$("#addpeople").click(function(n){n.preventDefault();var t=$("#AddDialog");$("iframe",t).attr("src","/SearchAdd?type=addpeople"),t.dialog("option","title","Add People"),t.dialog("open")}),$("#addorg").click(function(n){n.preventDefault();var t=$("#AddDialog");$("iframe",t).attr("src","/AddOrganization"),t.dialog("option","title","Add Organization"),t.dialog("open")}),$("#cleartag").click(function(n){n.preventDefault(),confirm("are you sure you want to empty the active tag?")&&$.post("/Tags/ClearTag",{},function(){window.location.reload()})}),$(".warntip").tooltip({delay:150,showBody:"|",showURL:!1}),$("#SearchText").each(function(){$(this).addClass("text-label"),$(this).focus(function(){(this.value===""||this.value===$(this).attr("default"))&&(this.value="",$(this).removeClass("text-label"),$(this).autocomplete("search","---"))}),$(this).blur(function(){this.value===""&&$(this).attr("default")&&(this.value=$(this).attr("default"),$(this).addClass("text-label"))})})});
//@ sourceMappingURL=main.custom.min.js.map